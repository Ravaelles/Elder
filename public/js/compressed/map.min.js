function createElementTile(o,e,n){html='<img class="map-object" style="top: '+n*TILE_SIZE+"px; left: "+e*TILE_SIZE+'px" src="'+o.image+'">';var s=document.getElementById("map-canvas");s.innerHTML=s.innerHTML+html}function initializeMapMove(){$("#map-canvas").mousedown(function(o){mapMouseDown(o)}).mouseup(function(o){mapMouseUp(o)}).mousemove(function(o){mapMouseMove(o)}).mousewheel(function(o){mapScroll(o)}).mouseleave(function(o){mapMouseLeave(o)})}function mapMouseDown(o){worldmap=$(".worldmap"),2===o.button,mousePreviousPosition=o,mouseIsClicked=!0,mouseHasMoved=!1}function mapMouseUp(o){mouseHasMoved||mapClick(o),mouseIsClicked=!1,mousePreviousPosition=null,mouseHasMoved=!1}function mapMouseMove(o){mouseIsClicked&&(mouseHasMoved=!0),mouseIsClicked&&null!=mousePreviousPosition&&(translationVector=moveWorldmapBackgroundImage(o),moveWorldmapObjects(translationVector)),mousePreviousPosition=o}function mapMouseLeave(o){mouseIsClicked&&(mapMouseUp(o),mouseIsClicked=!1)}function mapClick(o){var e=getMapCoordinatesFromScreenClick(o);gameLog("<span>["+e.mapX+","+e.mapY+"]</span> is unknown wasteland, not very hospitable place.")}function changeZoom(o,e){}function _mapScroll(o){var e=o.deltaY;e>=1?changeZoom(o,!1):-1>=e&&changeZoom(o,!0)}window.initQueue.push(function(){var o=world["map-width"],e=world["map-height"],n=world.tiles;for(row=0;row<e;row++)for(col=0;col<o;col++)createElementTile(n[row][col],col,row)});var mousePreviousPosition=null,mouseIsClicked=!1,mouseHasMoved=!1,TILE_SIZE=80;window.initQueue.push(function(){$("#map-canvas").mousewheel(function(o){_mapScroll(o)})});